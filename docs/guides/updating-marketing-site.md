# Updating the Betamax Marketing Site

This guide helps future agents (and humans) update the Betamax marketing site efficiently.

## Site Overview

- **Framework**: Docusaurus 3.9.2 (React/TypeScript)
- **Location**: `/website/`
- **URL**: https://marcus.github.io/betamax/
- **Theme**: Dark terminal aesthetic, monospace fonts (JetBrains Mono)
- **Primary Color**: `#00d4aa` (cyan/teal)

## Directory Structure

```
website/
├── docusaurus.config.ts      # Site config, navbar, footer
├── sidebars.ts               # Auto-generated from docs structure
├── package.json              # Dependencies
├── src/
│   ├── pages/
│   │   ├── index.tsx         # Homepage (React component)
│   │   └── index.module.css  # Homepage styles
│   └── css/
│       └── custom.css        # Global theme styles
├── docs/                     # Documentation (Markdown)
│   ├── intro.md              # Getting Started
│   ├── cli-reference.md      # CLI options
│   ├── keys-file-format.md   # Keys syntax reference
│   ├── examples.md           # Usage examples
│   └── guides/               # In-depth guides
│       ├── _category_.json   # Section config
│       ├── gif-recording.md
│       └── recording.md
└── static/
    ├── img/                  # Images, logos
    │   ├── betamax-logo.png
    │   └── demos/            # Demo screenshots/GIFs
    └── demos/                # Demo .keys files
```

## Common Tasks

### Adding a New Feature to the Homepage

Edit `/website/src/pages/index.tsx`:

1. **Feature Cards** - Add to `FeatureList` array:
```tsx
const FeatureList: FeatureItem[] = [
  {
    title: 'Feature Name',
    icon: 'icon-name',
    description: (
      <>
        Short description of the feature.
      </>
    ),
  },
  // ...existing features
];
```

2. **Quick Start Section** - Update `QuickStart` component with new usage examples

3. **Output Formats** - Edit `OutputFormats` component if adding new format support

### Adding Documentation

Create a new `.md` file in `/website/docs/`:

```yaml
---
sidebar_position: N    # Order in sidebar (1, 2, 3...)
title: Page Title
---

# Page Title

Content here...
```

The sidebar auto-generates based on `sidebar_position` values.

### Adding a Guide

Create in `/website/docs/guides/`:

```yaml
---
sidebar_position: N
title: Guide Title
---
```

Guides appear collapsed under "Guides" in the sidebar (configured in `_category_.json`).

### Adding Images/Assets

1. Place in `/website/static/img/demos/`
2. Reference as `/img/demos/filename.png` (relative to `/static`)

### Updating CLI Reference

Edit `/website/docs/cli-reference.md`:
- Add new commands in their own `##` section
- Use tables for options: `| Option | Default | Description |`
- Include examples with code blocks

## Documentation Patterns

### Front Matter
Every doc needs YAML front matter:
```yaml
---
sidebar_position: 2
title: Display Title
---
```

### Code Blocks
Use language-tagged fenced blocks:
````markdown
```bash
betamax record -o demo.keys vim
```
````

### Tables
Pipe-separated markdown tables:
```markdown
| Option | Default | Description |
|--------|---------|-------------|
| `-o` | `recording.keys` | Output file |
```

### Internal Links
Use relative paths from docs root:
```markdown
See [Keys File Format](/docs/keys-file-format)
```

### Images
```markdown
![Alt text](/img/demos/screenshot.png)
```

### Cross-References
End docs with "See Also" section linking related content.

## Styling

### CSS Variables (custom.css)
```css
--ifm-color-primary: #00d4aa;     /* Primary accent */
--ifm-background-color: #0a0a0f;  /* Dark background */
--terminal-border: #2a2a4a;       /* Border color */
```

### Component Styles (index.module.css)
- `.featureCard` - Feature card container
- `.quickStart` - Quick start section
- `.formatCard` - Output format cards
- `.heroBanner` - Hero section

### Icons
Use `icon-*` class names in feature cards. They're styled via `.featureIcon` class.

## Development Workflow

### Local Development
```bash
cd website
npm install
npm start
```
Opens http://localhost:3000/betamax/

### Build
```bash
npm run build
```
Output goes to `/website/build/`

### Deploy
```bash
npm run deploy
```
Deploys to GitHub Pages.

## Configuration Reference

### docusaurus.config.ts

Key settings:
- `title`, `tagline` - Site metadata
- `url`, `baseUrl` - Deployment URLs
- `themeConfig.navbar` - Navigation links
- `themeConfig.footer` - Footer links
- `colorMode.defaultMode: 'dark'` - Dark theme default

### sidebars.ts

Currently auto-generated:
```ts
const sidebars = {
  tutorialSidebar: [{type: 'autogenerated', dirName: '.'}],
};
```

This builds sidebar from `docs/` directory structure automatically.

## Checklist for Adding Features

1. [ ] Update homepage (`index.tsx`) - add feature card if prominent
2. [ ] Update Getting Started (`intro.md`) - add quick example
3. [ ] Update CLI Reference (`cli-reference.md`) - add command/options
4. [ ] Create guide if needed (`guides/*.md`) - detailed walkthrough
5. [ ] Add screenshots/GIFs (`static/img/demos/`)
6. [ ] Test locally (`npm start`)
7. [ ] Build (`npm run build`) - ensure no errors
8. [ ] Deploy (`npm run deploy`)

## Troubleshooting

### Sidebar Not Updating
- Check `sidebar_position` in front matter
- Restart dev server after adding new files

### Images Not Loading
- Use path relative to `/static`: `/img/demos/file.png`
- Ensure file exists in `/website/static/img/demos/`

### Build Errors
- Check for broken internal links
- Verify all code blocks are properly closed
- Run `npm run build` to see detailed errors

### Styling Issues
- Component styles: `index.module.css`
- Global styles: `custom.css`
- Use browser dev tools to inspect CSS classes
